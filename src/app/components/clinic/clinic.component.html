
<input type="hidden"  (click)="openModal(template)" id="hiddenModalButton"/>




 <!-- <agm-map [latitude]="latitude" [longitude]="longitude">  
  <agm-marker [latitude]="latitude" [longitude]="longitude" (markerClick)="clickedMarker(infoWindow)"></agm-marker>  
</agm-map>  -->

<h1 class="text-center text-primary font-weight-bold font-styling">Clinics in Malaysia</h1>
<br>
<accordion>
    <accordion-group class="pointer" *ngFor='let state of states' [heading]= 'state.state' 
            panelClass="card card-title text-primary bg-custom border-primary " 
            (isOpenChange)="loadDocInfo($event,state.state)">

            <accordion-group    *ngFor='let doc of doctorsInfo[state.state]' heading="Dr. {{doc.name}}">
                <div class="row">
                    <div class="col-md-6">        
                            <table class="table">

                                    <tbody>
                                      <tr>
                                            <td class="font-weight-bold">Gender</td>
                                            <td class="font-weight-bold">{{doc.gender}}</td>
                                      </tr>
                                      <tr>
                                            <td class="font-weight-bold">Address</td>
                                            <td class="font-weight-bold">{{doc.clinicAddress}}</td>
                                      </tr>
                                      <tr>
                                            <td class="font-weight-bold">Operating Hours</td>
                                            <td class="font-weight-bold">{{doc.openHr}} - {{doc.closeHr}}</td>
                                       </tr>
                                       <tr>
                                            <td class="font-weight-bold">Contact No.</td>
                                            <td class="font-weight-bold">{{doc.contactNo}}</td>
                                        </tr>
                                        <tr>
                                            <td class="font-weight-bold">Waiting Patient</td>
                                            <td class="font-weight-bold">{{doc.waitingPatient}}</td>
                                        </tr>
                                    </tbody>

                            </table>
                    </div>
                    <div class="col-md-6">
                        <agm-map [latitude]='doc.lat' [longitude]='doc.longi'>  
                            <agm-marker [latitude]='doc.lat' [longitude]='doc.longi'></agm-marker>  
                        </agm-map> 
                    </div>
                </div>
                <br><br>
                <div class="row">
                    
                    <div class="checkbox ml-4">
                        <label class='font-italic black font-weight-bold'><input type="checkbox" #checkbox>  Do you need transportation service ? Hassle-Free Mobility. Right On Your Doorstep  </label>
                    </div>
                </div>
                <div class="row ml-4 mr-4">
                    <button class="btn btn-block btn-success" (click)='onBooking(checkbox.checked,doc.id)'>Book An Appointment</button>
                </div>
            </accordion-group>
       
    </accordion-group>
</accordion>

<ng-template #template>
        <div class="modal-lg">
            <div class="modal-header">
              <h4 class="modal-title pull-left">Confirmation Appointment</h4>
              <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              This is your booking reference no. {{ bookingRefId }}. Please present it at the clinic's counter upon registration to confirm your attendance
            </div>
        </div>
    </ng-template>